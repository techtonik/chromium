<link rel="import" href="chrome://resources/polymer/v1_0/polymer/polymer.html">
<link rel="import" href="chrome://resources/polymer/v1_0/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="chrome://resources/polymer/v1_0/paper-button/paper-button.html">
<link rel="import" href="chrome://resources/polymer/v1_0/paper-input/paper-input.html">
<link rel="import" href="chrome://resources/polymer/v1_0/paper-toggle-button/paper-toggle-button.html">

<dom-module id="bluetooth-settings">
  <link rel="import" type="css" href="bluetooth_settings.css">
  <template>
    <div class="layout vertical">
      <div class="element-label">{{title}}</div>
      <form id="bluetooth-settings-form">
        <div class="layout vertical">
          <span class="form-label">Devices</span>
          <template is="dom-repeat" items="[[devices]]">
            <div class="device-container">
              <div class="bluetooth-device">
                <div class="element-label">[[item.alias]]</div>
                <paper-input value="{{item.alias}}"
                    label="Alias"></paper-input>
                <paper-input value="{{item.path}}"
                    label="Path"></paper-input>
                <paper-input value="{{item.address}}"
                    label="Address"></paper-input>
                <paper-input value="{{item.name}}"
                    label="name"></paper-input>
                <span class="toggle-button-label">Trusted</span>
                <paper-toggle-button
                    checked="{{item.isTrusted}}"></paper-toggle-button>
                <div class="device-field">
                  <label>
                    <span class="form-label">Class/Type</span>
                    <paper-radio-group selected="{{item.class}}">
                      <template is="dom-repeat"
                          items="[[deviceClassOptions]]" as="option"
                          index-as="option_index">
                        <paper-radio-button name="[[option.text]]"
                            >[[option.text]]</paper-radio-button>
                      </template>
                    </paper-radio-group>
                  </label>
                </div>
                <div class="device-field">
                  <label>
                    <span class="form-label">Pair Authentication Type</span>
                    <paper-radio-group selected="{{item.pairingMethod}}">
                      <template is="dom-repeat"
                          items="[[deviceAuthenticationMethods]]" as="method"
                          index-as="method_index">
                        <paper-radio-button name="[[method]]"
                            >[[method]]</paper-radio-button>
                      </template>
                    </paper-radio-group>
                  </label>
                </div>
                <template is="dom-if"
                    if="[[showAuthToken(item.pairingMethod)]]">
                  <div class="device-field">
                    <paper-input value="{{item.pairingAuthToken}}"
                        label="Code"></paper-input>
                  </div>
                </template>
                <paper-button raised class="colored" on-click="pairDevice"
                    data-index="[[index]]">
                  Pair
                </paper-button>
                <paper-button raised class="colored"
                    on-click="discoverDevice" data-index="[[index]]">
                  Make Discoverable
                </paper-button>
              </div>
            </div>
          </template>
          <paper-button on-click="appendNewDevice">
            [+] New Device
          </paper-button>
        </div>
      </form>
    </div>
  </template>
  <script src="bluetooth_settings.js"></script>
</dom-module>
